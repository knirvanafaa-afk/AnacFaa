<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco de Dados - Quest√µes</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f2f5; display: flex; justify-content: center; padding: 20px; }
        .container { width: 100%; max-width: 600px; background: white; padding: 30px; border-radius: 20px; box-shadow: 0px 10px 25px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #333; margin-bottom: 20px; text-transform: uppercase; }
        
        .pergunta-card { 
            border: 2px solid #3498db; 
            padding: 20px; 
            border-radius: 15px; 
            background-color: #f4faff; 
            margin-bottom: 20px; 
            position: relative; /* Para posicionar o bot√£o de deletar */
        }
        .materia-tag { font-weight: bold; color: #2980b9; margin-bottom: 10px; display: block; font-size: 14px; }
        .texto-pergunta { font-size: 18px; font-weight: bold; color: #333; margin-bottom: 15px; }
        .respostas-lista { display: grid; gap: 8px; }
        .item-resposta { background: white; padding: 12px; border: 1px solid #ccc; border-radius: 10px; font-size: 15px; color: #444; }
        .correta { border: 2px solid #27ae60 !important; background-color: #eafaf1 !important; color: #27ae60 !important; font-weight: bold; }
        
        /* Bot√£o Deletar Individual */
        .btn-deletar-individual {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
        }

        .btn-voltar { 
            width: 100%; padding: 15px; border: none; border-radius: 12px; 
            background-color: #27ae60; color: white; cursor: pointer; 
            font-weight: bold; text-transform: uppercase; margin-bottom: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <button class="btn-voltar" onclick="window.location.href='index.html'">‚¨Ö Voltar ao Painel</button>
    <h2>Quest√µes no Banco</h2>
    
    <div id="lista-perguntas">
        <p style="text-align: center; color: #666;">Buscando informa√ß√µes no banco de dados...</p>
    </div>
</div>

<script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

    const supabase = createClient('https://ymyxikhlhkkvcufgwufe.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlteXhpa2hsaGtrdmN1Zmd3dWZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5MTc4MTYsImV4cCI6MjA4NjQ5MzgxNn0.kcbbkKDx1Jt2ayX2KwJa0Pr8ZsGTj4BTxV1y2RXU9WA')

    async function carregarQuestoes() {
        const corpoTabela = document.getElementById('corpo_tabela'); // Ajuste o ID conforme seu HTML
        corpoTabela.innerHTML = "<tr><td colspan='5'>Carregando...</td></tr>";

        const { data: questoes, error } = await supabase
            .from('questoes')
            .select('*')
            .order('num', { ascending: true });

        if (error) {
            alert("Erro ao carregar: " + error.message);
            return;
        }

        corpoTabela.innerHTML = ""; // Limpa o carregando

        questoes.forEach(q => {
            const linha = `
                <tr>
                    <td>${q.num}</td>
                    <td>${q.materia}</td>
                    <td>${q.pergunta}</td>
                    <td>${q.foto ? `<img src="${q.foto}" width="80">` : 'Sem foto'}</td>
                    <td><button onclick="window.apagarQuestao('${q.num}')">üóëÔ∏è</button></td>
                </tr>
            `;
            corpoTabela.innerHTML += linha;
        });
    }

    // Fun√ß√£o para apagar (Global para o bot√£o funcionar)
    window.apagarQuestao = async (id) => {
        if(confirm("Deseja realmente apagar a quest√£o " + id + "?")) {
            const { error } = await supabase.from('questoes').delete().eq('num', id);
            if (error) alert("Erro ao apagar");
            else location.reload();
        }
    };

    carregarQuestoes();
</script>
 
</body>
</html>